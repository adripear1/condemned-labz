<style>
    #shopify-section-{{ section.id }} .mm-testimonials {
        background-color: {{ section.settings.background_color }};
        color: {{ section.settings.text_color }};
        padding-top: {{ section.settings.padding_top }}px;
        padding-bottom: {{ section.settings.padding_bottom }}px;
        @media (max-width: 749px){
            padding-top: 50px;
        }
    }
    .mm-testimonials{
        .splide__track{
            @media (min-width: 750px){
                max-width: 92%;
            }
            margin: auto;
        }
        .testimonial{
            margin: 0 20px;
            @media (max-width: 749px){
                text-align: center;
            }
        }
        .header-title{
            font-size: 48px;
            font-style: normal;
            font-weight: 700;
            line-height: 100%;
            letter-spacing: -0.8px;
            text-transform: uppercase;
            color: {{ section.settings.text_color }};
            margin: 0 auto 32px;
            text-align: center;
            @media (max-width: 749px){
                font-size: 26px;
            }
        }
        .testimonial-content{
            color: rgba(255, 255, 255, 0.80);
            font-family: Inter;
            font-size: 18px;
            font-style: italic;
            font-weight: 400;
            line-height: 22.4px;
            letter-spacing: 0.6px;
            max-width: 280px;
            @media (max-width: 749px){
                margin: auto;
            }
            a{
                color: #FFF;
                font-family: Inter;
                font-size: 18px;
                font-style: normal;
                font-weight: 600;
                line-height: 22.4px;
                letter-spacing: 0.6px;
                text-decoration: none;
            }
        }
        .name{
            color: #FFF;
            font-family: Assistant;
            font-size: 16px;
            font-style: normal;
            font-weight: 800;
            line-height: 22.4px;
            letter-spacing: 0.6px;
            margin: 19px 0 0;
        }
        .splide__arrow{
            background: transparent;
            width: 32px;
            height: 32px;
            @media (max-width: 749px){
                top: unset;
                bottom: -55px;
                width: 24px;
                height: 24px;
                &.splide__arrow--prev{
                    transform:translate(-20%, 0);
                    left: 28%;
                }
                &.splide__arrow--next{
                    transform:translate(20%, 0);
                    right: 28%;
                }
            }
            svg{
                width: 20px;
                height: 20px;
                fill: white;
            }
        }
        .splide__pagination{
            bottom: -50px;
        }
        .splide__pagination__page.is-active{
            background: #FAB20A;
        }
    }
</style>
<div class="mm-testimonials">
    <div class="page-width">
        <h2 class="header-title">
            {{ section.settings.title }}
        </h2>
        <div class="splide">
            <div class="splide__track">
                <ul class="splide__list">
                    {% for block in section.blocks %}
                    <li class="splide__slide">
                        <div class="testimonial">
                            {% if block.settings.image %}
                            <div class="testimonial-image">
                                {{ block.settings.image | image_url: width: 80 | image_tag }}
                            </div>
                            {% endif %}
                            <div class="testimonial-content">
                                <p>{{ block.settings.text }}</p>
                                <h3 class="name">{{ block.settings.name }}</h3>
                            </div>
                        </div>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide.min.css" rel="stylesheet">
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var splide = new Splide('#shopify-section-{{ section.id }} .splide', {
            type       : 'loop',
            perPage    : 3,
            perMove    : 1,
            autoplay   : false,
            pagination: true,
            arrows: true,
            breakpoints: {
                600: {
                    perPage: 1,
                },
                900: {
                    perPage: 2,
                },
                1200: {
                    perPage: 3,
                },
            },
        });

        splide.mount();
    });
</script>

{% schema %}
{
    "name":"MM Testimonials",
    "settings":[{
        "type":"text",
        "label":"Title",
        "id":"title",
        "default":"Testimonials"
    },{
        "type":"header",
        "content":"Color"
    },{
        "type":"color",
        "label":"Background Color",
        "id":"background_color",
        "default":"#000"
    },{
        "type":"color",
        "label":"Text Color",
        "id":"text_color",
        "default":"#fff"
    },{
        "type":"header",
        "content":"Paddings"
    },{
        "type": "range",
        "id": "padding_top",
        "min": 0,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "t:sections.all.padding.padding_top",
        "default": 36
      },
      {
        "type": "range",
        "id": "padding_bottom",
        "min": 0,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "t:sections.all.padding.padding_bottom",
        "default": 36
      }],
      "blocks": [{
        "type":"testimonial",
        "name":"Testimonial",
        "settings":[{
            "type":"image_picker",
            "id":"image",
            "label":"Image"
        },{
            "type":"richtext",
            "label":"Text",
            "id":"text"
        },{
            "type":"text",
            "label":"Name",
            "id":"name"
        }]
    }],
    "presets": [{
        "name":"MM Testimonials",
    }]
}
{% endschema %}